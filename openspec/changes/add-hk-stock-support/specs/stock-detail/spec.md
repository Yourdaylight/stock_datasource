# stock-detail Spec Delta

## MODIFIED Requirements

### Requirement: 港股详情支持

股票详情页面 SHALL 支持展示港股的行情数据和 K 线图。

#### Scenario: 查看港股详情

- **GIVEN** 用户在股票列表中点击某只港股（代码以 .HK 结尾）
- **WHEN** 股票详情对话框打开
- **THEN** 系统加载并展示该港股的 K 线图
- **AND** 显示最新收盘价、涨跌额、涨跌幅
- **AND** 股票名称显示港股简称

#### Scenario: 港股技术指标分析

- **GIVEN** 港股详情页面已加载
- **WHEN** 用户选择技术指标（MA、MACD、RSI、KDJ）
- **THEN** 系统计算并展示对应的技术指标图表

#### Scenario: 港股 AI 分析

- **GIVEN** 港股详情页面已加载
- **WHEN** 用户点击「AI 智能分析」按钮
- **THEN** 系统执行 AI 分析并流式输出分析结果

#### Scenario: 港股功能限制

- **GIVEN** 用户正在查看港股详情
- **WHEN** 页面渲染完成
- **THEN** 筹码峰模块不显示（港股无筹码数据）
- **AND** 十维画像模块不显示（港股暂不支持）
- **AND** 显示友好提示告知用户功能限制原因

#### Scenario: 港股复权处理

- **GIVEN** 用户查看港股 K 线图
- **WHEN** 用户选择前复权或后复权
- **THEN** 系统使用港股复权因子调整价格数据
- **AND** K 线图显示复权后的价格

## ADDED Requirements

### Requirement: 股票列表港股支持

股票列表 SHALL 支持显示港股数据并提供市场类型筛选。

#### Scenario: 市场类型筛选

- **GIVEN** 用户在股票列表页面
- **WHEN** 用户选择市场类型为「港股」
- **THEN** 股票列表仅显示港股数据
- **AND** 列表包含股票代码、名称、最新价、涨跌幅等字段

#### Scenario: 全市场搜索

- **GIVEN** 用户在股票列表页面
- **WHEN** 用户输入搜索关键词（如「腾讯」）
- **THEN** 系统同时搜索 A 股和港股
- **AND** 搜索结果按相关度排序展示

#### Scenario: 港股列表分页

- **GIVEN** 用户选择查看港股列表
- **WHEN** 列表数据加载完成
- **THEN** 支持分页浏览所有上市港股
- **AND** 显示总数量统计

#### Scenario: 港股行情展示

- **GIVEN** 港股列表已加载
- **WHEN** 用户查看列表
- **THEN** 显示最新交易日的行情数据
- **AND** 涨跌幅使用红涨绿跌颜色标识
