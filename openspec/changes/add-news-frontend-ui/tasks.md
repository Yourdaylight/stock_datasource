# Tasks: 新增新闻资讯前端页面

## 1. 基础架构搭建

- [x] 1.1 创建页面目录结构
  - `frontend/src/views/news/NewsView.vue` - 主页面
  - `frontend/src/views/news/components/` - 组件目录
  - `frontend/src/api/news.ts` - API 封装
  - `frontend/src/stores/news.ts` - 状态管理
  - `frontend/src/types/news.ts` - 类型定义

- [x] 1.2 定义 TypeScript 类型
  - NewsItem 接口（与后端保持一致）
  - NewsSentiment 接口
  - HotTopic 接口
  - NewsFilters 接口
  - UserPreferences 接口

## 2. API 层实现

- [x] 2.1 实现 news API 封装
  - `getNewsByStock()` - 获取股票相关新闻
  - `getMarketNews()` - 获取市场新闻
  - `getHotTopics()` - 获取热点话题
  - `analyzeSentiment()` - 分析新闻情绪
  - `searchNews()` - 搜索新闻

- [x] 2.2 添加错误处理和重试机制
  - 网络错误处理
  - API 超时处理
  - 数据格式验证

## 3. 状态管理实现

- [x] 3.1 创建 Pinia news store
  - 新闻数据状态管理
  - 筛选条件状态管理
  - 用户偏好设置管理
  - 加载状态管理

- [x] 3.2 实现计算属性
  - `filteredNews` - 筛选后的新闻列表
  - `sentimentStats` - 情绪统计数据
  - `trendingTopics` - 热门话题排序

## 4. 核心组件实现

- [x] 4.1 实现 NewsView.vue 主页面
  - 三栏布局设计
  - 响应式适配
  - 组件组合和数据流

- [x] 4.2 实现 NewsFilterPanel.vue 筛选面板
  - 股票代码选择器
  - 时间范围选择器
  - 新闻类型筛选
  - 情绪倾向筛选
  - 筛选条件保存和重置

- [x] 4.3 实现 NewsListPanel.vue 新闻列表
  - 虚拟滚动优化
  - 无限加载
  - 排序功能
  - 刷新功能

- [x] 4.4 实现 NewsItemCard.vue 新闻卡片
  - 新闻信息展示
  - 情绪标签显示
  - 股票代码标签
  - 操作按钮（分享、收藏）

## 5. 辅助组件实现

- [x] 5.1 实现 HotTopicsPanel.vue 热点面板
  - 热点话题列表
  - 热度可视化
  - 点击跳转筛选

- [x] 5.2 实现 SentimentChart.vue 情绪图表
  - 情绪分布饼图
  - 情绪趋势折线图
  - ECharts 集成

- [x] 5.3 实现 NewsDetailDialog.vue 详情弹窗
  - 完整新闻内容展示
  - AI 分析结果展示
  - 相关股票信息
  - 分享和收藏功能

- [x] 5.4 实现 SentimentTag.vue 情绪标签
  - 情绪颜色标识
  - 情绪图标显示
  - 情绪分数展示

## 6. 路由和导航集成

- [x] 6.1 添加新闻页面路由
  - 在 `router/index.ts` 中添加 `/news` 路由
  - 配置路由元信息和权限

- [x] 6.2 更新主导航菜单
  - 在 `App.vue` 中添加"新闻资讯"菜单项
  - 设置菜单图标和激活状态

- [x] 6.3 实现页面间跳转
  - 从股票详情页跳转到相关新闻
  - 从对话页面跳转到新闻详情
  - 支持 URL 参数传递筛选条件

## 7. 用户体验优化

- [x] 7.1 实现加载状态
  - 骨架屏加载效果
  - 加载进度指示器
  - 空状态页面设计

- [x] 7.2 实现错误处理
  - 网络错误提示
  - 数据加载失败处理
  - 用户友好的错误信息

- [x] 7.3 实现响应式设计
  - 移动端布局适配
  - 侧边栏折叠功能
  - 触摸操作优化

## 8. 性能优化

- [x] 8.1 实现数据缓存
  - 新闻数据本地缓存
  - 缓存过期策略
  - 缓存更新机制

- [ ] 8.2 实现虚拟滚动
  - 大量新闻数据优化
  - 滚动性能提升
  - 内存使用优化

- [ ] 8.3 实现懒加载
  - 图片懒加载
  - 组件懒加载
  - 路由懒加载

## 9. 个性化功能

- [ ] 9.1 实现关注股票管理
  - 添加/删除关注股票
  - 关注股票新闻推荐
  - 关注列表持久化

- [ ] 9.2 实现筛选条件保存
  - 常用筛选条件保存
  - 筛选历史记录
  - 快速筛选预设

- [ ] 9.3 实现个性化推荐
  - 基于用户行为的新闻推荐
  - 热点话题个性化
  - 阅读偏好学习

## 10. 测试

- [ ] 10.1 编写单元测试
  - 组件渲染测试
  - 状态管理测试
  - API 调用测试

- [ ] 10.2 编写集成测试
  - 页面交互测试
  - 数据流测试
  - 路由跳转测试

- [ ] 10.3 手动测试验证
  - 功能完整性测试
  - 用户体验测试
  - 兼容性测试

## Dependencies

- 任务 2、3 依赖任务 1（基础架构）
- 任务 4、5 依赖任务 2、3（API 和状态管理）
- 任务 6 依赖任务 4（核心组件）
- 任务 7、8、9 依赖任务 4、5、6（基础功能）
- 任务 10 依赖所有前置任务

## Parallelizable Work

- 任务 2.1 和 3.1 可并行（API 封装和状态管理）
- 任务 4.2、4.3、4.4 可并行（不同组件实现）
- 任务 5.1、5.2、5.3、5.4 可并行（辅助组件）
- 任务 7、8、9 可并行（优化功能）

## Implementation Notes

### 技术栈要求：
- **Vue 3** - 使用 Composition API 和 `<script setup>` 语法
- **TDesign Vue Next** - 统一 UI 组件库
- **Pinia** - 状态管理
- **Vue Router** - 路由管理
- **Axios** - HTTP 客户端
- **ECharts** - 图表可视化
- **TypeScript** - 类型安全

### 设计规范：
- 遵循现有页面的设计风格和交互模式
- 使用统一的颜色主题和字体规范
- 保持与 MarketView、ScreenerView 等页面的一致性

### 性能要求：
- 新闻列表支持 1000+ 条数据流畅滚动
- 页面首次加载时间 < 2 秒
- 筛选操作响应时间 < 500ms

### 兼容性要求：
- 支持现代浏览器（Chrome 90+、Firefox 88+、Safari 14+）
- 支持移动端浏览器
- 支持屏幕分辨率 1280x720 及以上

### 数据依赖：
- **强依赖**: `add-news-analyst-agent` 提案的后端 API
- **API 接口**: `/api/news/*` 系列接口必须正常工作
- **数据格式**: 严格按照后端 API 返回的数据格式进行前端适配

### 用户权限：
- 新闻浏览功能对所有登录用户开放
- 个性化设置需要用户登录
- 管理员可能有额外的新闻管理权限（后续扩展）