## ADDED Requirements

### Requirement: 回撤曲线图展示
系统 SHALL 提供回撤曲线图组件，用于可视化展示策略净值回撤的时间序列变化。

#### Scenario: 回撤曲线基本展示
- **WHEN** 用户查看回测结果的绩效图表
- **THEN** 系统显示回撤曲线图，包含：
  - X轴为时间序列
  - Y轴为回撤百分比（负值）
  - 回撤曲线为红色填充区域
  - 零轴线为基准线

#### Scenario: 最大回撤点标注
- **WHEN** 回撤曲线图加载完成
- **THEN** 系统自动标注最大回撤点，包含：
  - 最大回撤点的时间标记
  - 最大回撤数值显示
  - 特殊颜色高亮显示

#### Scenario: 回撤恢复期标识
- **WHEN** 策略存在回撤恢复过程
- **THEN** 系统标识回撤恢复期，包含：
  - 回撤开始到恢复的时间区间
  - 恢复持续时间显示
  - 不同回撤周期的区分标识

### Requirement: 每日盈亏图展示
系统 SHALL 提供每日盈亏图组件，用于展示策略每日收益的分布情况。

#### Scenario: 每日盈亏柱状图
- **WHEN** 用户查看每日盈亏图表
- **THEN** 系统显示柱状图，包含：
  - X轴为交易日期
  - Y轴为当日收益金额或收益率
  - 盈利日为绿色柱状
  - 亏损日为红色柱状

#### Scenario: 累计收益趋势线
- **WHEN** 每日盈亏图显示
- **THEN** 系统叠加显示累计收益趋势线，包含：
  - 累计收益的连续曲线
  - 与每日柱状图的对比展示
  - 趋势线颜色区分上涨/下跌

#### Scenario: 盈亏统计信息
- **WHEN** 用户查看每日盈亏图
- **THEN** 系统显示统计信息，包含：
  - 盈利交易日数量和比例
  - 亏损交易日数量和比例
  - 平均日收益和标准差
  - 最大单日盈利和亏损

### Requirement: 收益分布图展示
系统 SHALL 提供收益分布图组件，用于展示策略收益率的概率分布特征。

#### Scenario: 收益率直方图
- **WHEN** 用户查看收益分布图
- **THEN** 系统显示直方图，包含：
  - X轴为收益率区间
  - Y轴为频次或概率密度
  - 自适应的分箱数量
  - 不同收益区间的颜色区分

#### Scenario: 正态分布对比
- **WHEN** 收益分布图加载
- **THEN** 系统叠加显示理论正态分布曲线，包含：
  - 基于实际数据均值和标准差的正态曲线
  - 与实际分布的对比展示
  - 分布偏离程度的可视化

#### Scenario: 分布统计指标
- **WHEN** 用户查看收益分布图
- **THEN** 系统显示分布统计指标，包含：
  - 偏度（Skewness）数值
  - 峰度（Kurtosis）数值
  - 关键分位数标记（5%, 25%, 75%, 95%）
  - VaR风险值标注

### Requirement: 图表交互功能
系统 SHALL 为所有绩效图表提供统一的交互功能。

#### Scenario: 图表缩放和平移
- **WHEN** 用户在图表上进行鼠标操作
- **THEN** 系统支持交互操作，包含：
  - 鼠标滚轮缩放时间轴
  - 拖拽平移查看不同时间段
  - 双击重置到默认视图
  - 框选缩放到指定区域

#### Scenario: 数据提示和标注
- **WHEN** 用户鼠标悬停在图表数据点上
- **THEN** 系统显示详细信息，包含：
  - 精确的时间和数值
  - 相关的计算指标
  - 格式化的数据展示
  - 多系列数据的对比信息

#### Scenario: 图表导出功能
- **WHEN** 用户需要导出图表
- **THEN** 系统提供导出选项，包含：
  - PNG格式图片导出
  - PDF格式文档导出
  - 自定义尺寸和分辨率
  - 包含标题和时间戳

## MODIFIED Requirements

### Requirement: 回测结果展示界面
系统 SHALL 在回测结果页面中集成完整的绩效图表展示功能，为用户提供全面的策略分析视图。

#### Scenario: 绩效图表标签页
- **WHEN** 用户查看回测结果详情
- **THEN** 系统在绩效图表标签页中显示：
  - 现有的权益曲线图（ReturnCurveChart）
  - 新增的回撤曲线图（DrawdownChart）
  - 新增的每日盈亏图（DailyPnLChart）
  - 新增的收益分布图（ReturnDistributionChart）

#### Scenario: 图表布局和响应式设计
- **WHEN** 用户在不同设备上查看图表
- **THEN** 系统自适应显示，包含：
  - 桌面端2x2网格布局
  - 平板端2x2或1x4布局
  - 移动端1x4垂直布局
  - 图表尺寸自动调整

#### Scenario: 图表数据加载状态
- **WHEN** 图表数据正在加载或计算中
- **THEN** 系统显示加载状态，包含：
  - 骨架屏占位显示
  - 加载进度指示器
  - 数据计算状态提示
  - 错误状态和重试机制