# Design: Agent Debug Sidebar

## Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ChatView.vue                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  SessionList  â”‚  â”‚   MessageList    â”‚  â”‚  AgentDebugSidebar     â”‚ â”‚
â”‚  â”‚  (å·¦ä¾§æ )     â”‚  â”‚   (å¯¹è¯ä¸»åŒº)      â”‚  â”‚  (å³ä¾§è°ƒè¯•æ )          â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚                        â”‚ â”‚
â”‚  â”‚  ä¼šè¯åˆ—è¡¨     â”‚  â”‚  ç”¨æˆ·æ¶ˆæ¯         â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  æ–°å»ºå¯¹è¯     â”‚  â”‚  AI å›å¤          â”‚  â”‚  â”‚ DebugTimeline   â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚  å›¾è¡¨/Markdown    â”‚  â”‚  â”‚ æ‰§è¡Œæ—¶é—´çº¿æ¦‚è§ˆ    â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚                        â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”‚ DebugMessage[]  â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”‚ ç¾¤èŠå¼æ¶ˆæ¯æµ     â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”‚                 â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”‚ ğŸ¤– Orchestrator â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”‚ æ„å›¾: è¡Œæƒ…åˆ†æ   â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”‚                 â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”‚ ğŸ“Š MarketAgent  â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”‚ å¼€å§‹åˆ†æ...      â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”‚                 â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”‚ ğŸ”§ get_daily    â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”‚ args: {code..}  â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”‚ result: 250æ¡   â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”‚                 â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”‚ âœ… MarketAgent  â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â”‚ å®Œæˆ (1.2s)     â”‚  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 1. åç«¯ SSE äº‹ä»¶å¢å¼º

### 1.1 æ–°å¢äº‹ä»¶ç±»å‹

åœ¨ç°æœ‰ 5 ç§äº‹ä»¶åŸºç¡€ä¸Šï¼Œå¢åŠ  `debug` äº‹ä»¶ç±»å‹ï¼Œä¸“é—¨æ‰¿è½½è°ƒè¯•ä¿¡æ¯ï¼š

```python
# æ–°å¢ debug äº‹ä»¶ç»“æ„
{
    "type": "debug",
    "debug_type": "agent_start" | "agent_end" | "tool_result" | "routing" | "classification",
    "agent": str,           # Agent åç§°
    "timestamp": float,     # äº‹ä»¶æ—¶é—´æˆ³ (time.time())
    "data": dict            # å…·ä½“æ•°æ®ï¼Œæ ¹æ® debug_type ä¸åŒè€Œä¸åŒ
}
```

### 1.2 å„ debug_type çš„ data ç»“æ„

| debug_type | data å­—æ®µ | è¯´æ˜ |
|-----------|----------|------|
| `classification` | `{intent, rationale, stock_codes, available_agents, selected_agent}` | Orchestrator æ„å›¾åˆ†ç±»ç»“æœ |
| `routing` | `{from_agent, to_agent, reason, is_parallel}` | Agent è·¯ç”±/åˆ†å‘å†³ç­– |
| `agent_start` | `{agent, input_summary, tools_available, parent_agent?}` | Agent å¼€å§‹æ‰§è¡Œï¼ˆåµŒå¥—è°ƒç”¨æ—¶ parent_agent éç©ºï¼‰ |
| `agent_end` | `{agent, duration_ms, tool_calls_count, success, error?}` | Agent æ‰§è¡Œå®Œæˆ |
| `tool_result` | `{tool, agent, args, result_summary, duration_ms, error?}` | Tool è°ƒç”¨ç»“æœæ‘˜è¦ |
| `handoff` | `{from_agent, to_agent, shared_data_summary, handoff_reason}` | Agent é—´ä»»åŠ¡ç§»äº¤ |
| `data_sharing` | `{from_agent, to_agent, data_key, data_summary}` | Agent é—´æ•°æ®å…±äº«ï¼ˆRedis ç¼“å­˜ä¼ é€’ï¼‰ |

### 1.3 åç«¯å‘å°„ç‚¹

**OrchestratorAgentï¼ˆorchestrator.pyï¼‰**:
- `_classify_with_llm()` å®Œæˆå â†’ yield `debug(classification)`
- è·¯ç”±åˆ°å­ Agent å‰ â†’ yield `debug(routing)`
- å¹¶è¡Œæ‰§è¡Œå¤š Agent æ—¶æ¯ä¸ª Agent åˆ†åˆ« â†’ yield `debug(routing, is_parallel=true)`
- `_share_data_to_next_agent()` è°ƒç”¨æ—¶ â†’ yield `debug(data_sharing)`
- Agent handoff è§¦å‘æ—¶ â†’ yield `debug(handoff)`

**LangGraphAgentï¼ˆbase_agent.pyï¼‰**:
- `execute_stream()` å¼€å§‹æ—¶ â†’ yield `debug(agent_start)`ï¼ˆåµŒå¥—è°ƒç”¨åœºæ™¯ä¸‹å¸¦ `parent_agent`ï¼‰
- `on_tool_end` äº‹ä»¶æ—¶ â†’ yield `debug(tool_result)` å¸¦ result_summary
- `execute_stream()` å®Œæˆæ—¶ â†’ yield `debug(agent_end)` å¸¦ duration

**chat/router.py**:
- `debug` äº‹ä»¶ç›´æ¥é€ä¼ ä¸º SSE `data:` å¸§

### 1.4 å‘åå…¼å®¹

- `debug` äº‹ä»¶ä¸ºçº¯æ–°å¢ç±»å‹ï¼Œä¸å½±å“ç°æœ‰ thinking/tool/content/done/error äº‹ä»¶
- å‰ç«¯ä¸è¯†åˆ« `debug` ç±»å‹æ—¶è‡ªåŠ¨å¿½ç•¥ï¼ˆç°æœ‰ switch æœ‰ default åˆ†æ”¯ï¼‰
- å¯é€šè¿‡æŸ¥è¯¢å‚æ•° `?debug=1` æ§åˆ¶æ˜¯å¦å‘é€ debug äº‹ä»¶ï¼ˆå¯é€‰ä¼˜åŒ–ï¼‰

## 2. å‰ç«¯æ•°æ®æ¨¡å‹

### 2.1 æ–°å¢ç±»å‹å®šä¹‰

```typescript
// api/chat.ts æ–°å¢
interface DebugEvent {
  type: 'debug'
  debug_type: 'classification' | 'routing' | 'agent_start' | 'agent_end' | 'tool_result' | 'handoff' | 'data_sharing'
  agent: string
  timestamp: number
  data: Record<string, any>
}

// DebugMessage æ¸²æŸ“æ¨¡å‹
interface DebugMessage {
  id: string
  timestamp: number
  role: 'orchestrator' | 'agent' | 'tool' | 'system' | 'handoff'
  agent: string
  targetAgent?: string       // A2A äº¤äº’çš„ç›®æ ‡ Agent
  parentAgent?: string       // åµŒå¥—è°ƒç”¨çš„çˆ¶ Agent
  title: string
  content: string            // Markdown æ ¼å¼çš„è¯¦ç»†ä¿¡æ¯
  debugType: string
  expandable: boolean        // æ˜¯å¦å¯å±•å¼€æŸ¥çœ‹è¯¦æƒ…
  expanded: boolean          // å½“å‰æ˜¯å¦å·²å±•å¼€
  duration?: number          // è€—æ—¶ (ms)
  status?: 'running' | 'success' | 'error'
  laneId?: string            // å¹¶è¡Œæ³³é“æ ‡è¯†ï¼ˆå¹¶è¡Œ Agent å„å ä¸€ä¸ª laneï¼‰
}
```

### 2.2 Store æ‰©å±•

```typescript
// stores/chat.ts æ–°å¢çŠ¶æ€
const debugMessages = ref<DebugMessage[]>([])        // å½“å‰æ¶ˆæ¯çš„è°ƒè¯•ä¿¡æ¯
const debugSidebarOpen = ref(false)                  // ä¾§æ å¼€å…³
const messageDebugMap = ref<Map<string, DebugMessage[]>>() // æ¶ˆæ¯ID â†’ è°ƒè¯•ä¿¡æ¯æ˜ å°„
```

### 2.3 è°ƒè¯•æ•°æ®æŒä¹…åŒ–ç­–ç•¥

- è°ƒè¯•æ¶ˆæ¯éš `ChatMessage.metadata.debug_events` å­˜å‚¨
- åˆ‡æ¢å†å²æ¶ˆæ¯æ—¶ä» metadata æ¢å¤ debugMessages
- LocalStorage ä¸­ä¸æŒä¹…åŒ–è°ƒè¯•æ•°æ®ï¼ˆä½“ç§¯è¿‡å¤§ï¼‰

## 3. å‰ç«¯ç»„ä»¶è®¾è®¡

### 3.1 AgentDebugSidebar.vue

- **ä½ç½®**: å¯¹è¯ä¸»åŒºåŸŸå³ä¾§
- **å®½åº¦**: é»˜è®¤ 360pxï¼Œå¯æ‹–æ‹½è°ƒæ•´ï¼ˆmin 280px, max 500pxï¼‰
- **è§¦å‘**: æ¶ˆæ¯æ°”æ³¡ä¸Šçš„"æŸ¥çœ‹è°ƒè¯•"æŒ‰é’® æˆ– é¡¶éƒ¨å·¥å…·æ çš„è°ƒè¯•å¼€å…³
- **é»˜è®¤çŠ¶æ€**: æŠ˜å æ”¶èµ·ï¼Œä»…æ˜¾ç¤ºä¸€ä¸ªå›¾æ ‡æŒ‰é’®

### 3.2 DebugMessage.vue

ä¸åŒ role çš„è§†è§‰åŒºåˆ†ï¼š

| role | å¤´åƒ/å›¾æ ‡ | æ°”æ³¡é¢œè‰² | å¯¹é½ |
|------|----------|---------|------|
| orchestrator | ğŸ¤– | è“è‰²ç³» | å·¦å¯¹é½ |
| agent | ğŸ“Š/ğŸ“‹/ğŸ’¼ç­‰ | ç»¿è‰²ç³» | å·¦å¯¹é½ |
| tool | ğŸ”§ | ç°è‰²ç³» | å±…ä¸­ï¼ˆç³»ç»Ÿæ¶ˆæ¯é£æ ¼ï¼‰ |
| system | âš™ï¸ | é»„è‰²ç³» | å±…ä¸­ |
| handoff | â¡ï¸ | ç´«è‰²ç³» | å±…ä¸­ï¼ˆå¸¦ç®­å¤´è¿æ¥çº¿ï¼‰ |

- é»˜è®¤æŠ˜å æ˜¾ç¤ºæ‘˜è¦ï¼ˆä¸€è¡Œï¼‰ï¼Œç‚¹å‡»å¯å±•å¼€æŸ¥çœ‹å®Œæ•´ä¿¡æ¯
- Tool è°ƒç”¨å±•ç¤º: args ç”¨ä»£ç å—ã€result ç”¨æŠ˜å åŒºåŸŸ
- Agent è€—æ—¶ç”¨ Tag æ ‡æ³¨

## 4. Agent-to-Agent (A2A) äº¤äº’å±•ç¤ºè®¾è®¡

ç³»ç»Ÿä¸­å­˜åœ¨ 4 ç§ A2A äº¤äº’æ¨¡å¼ï¼Œéœ€è¦ä¸åŒçš„å¯è§†åŒ–ç­–ç•¥ã€‚

### 4.1 å¤š Agent å¹¶è¡Œæ‰§è¡Œ

**åœºæ™¯**: `CONCURRENT_AGENT_GROUPS` ä¸­å®šä¹‰çš„ç»„åˆï¼Œå¦‚ MarketAgent + ReportAgent å¹¶è¡Œåˆ†æã€‚

**å±•ç¤ºæ–¹å¼ â€” å¹¶è¡Œæ³³é“ (Swim Lanes)**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– OrchestratorAgent              â”‚
â”‚  æ„å›¾: è¡Œæƒ…+è´¢æŠ¥åˆ†æ                 â”‚
â”‚  è·¯ç”±: å¹¶è¡Œæ‰§è¡Œ 2 ä¸ª Agent           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Lane A       â”‚ Lane B               â”‚
â”‚ ğŸ“Š Market    â”‚ ğŸ“‹ Report            â”‚
â”‚ Agent        â”‚ Agent                â”‚
â”‚              â”‚                      â”‚
â”‚ ğŸ”§ get_daily â”‚ ğŸ”§ get_financial     â”‚
â”‚ args: {...}  â”‚ args: {...}          â”‚
â”‚ 250æ¡ 0.8s   â”‚ 12æ¡ 1.1s            â”‚
â”‚              â”‚                      â”‚
â”‚ âœ… å®Œæˆ 1.2s â”‚ âœ… å®Œæˆ 1.5s          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¤– OrchestratorAgent              â”‚
â”‚  æ±‡æ€»: åˆå¹¶ 2 ä¸ª Agent ç»“æœ          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®ç°**: `routing` äº‹ä»¶ä¸­ `is_parallel=true` æ—¶ï¼Œå‰ç«¯åˆ›å»ºå¹¶è¡Œ laneã€‚æ¯æ¡ debug æ¶ˆæ¯çš„ `laneId` å­—æ®µæ ‡è¯†æ‰€å±æ³³é“ã€‚æ—¶é—´çº¿ä¸Šå¯¹åº”å¤šè¡Œæ˜¾ç¤ºã€‚

### 4.2 Agent Handoff ç§»äº¤

**åœºæ™¯**: `AGENT_HANDOFF_MAP` å®šä¹‰çš„åˆæ³•ç§»äº¤è·¯å¾„ï¼Œå¦‚ MarketAgent å®ŒæˆæŠ€æœ¯åˆ†æåç§»äº¤ç»™ BacktestAgent è¿›è¡Œå›æµ‹ã€‚

**å±•ç¤ºæ–¹å¼ â€” @æåŠ + ç®­å¤´è¿æ¥**:
```
â”‚ ğŸ“Š MarketAgent                     â”‚
â”‚ âœ… å®ŒæˆæŠ€æœ¯åˆ†æ (1.2s)              â”‚
â”‚                                     â”‚
â”‚     â¡ï¸ ç§»äº¤ç»™ BacktestAgent          â”‚
â”‚     å…±äº«æ•°æ®: stock_info(600519),    â”‚
â”‚              daily_data(250æ¡)       â”‚
â”‚                                     â”‚
â”‚ ğŸ”¬ BacktestAgent                    â”‚
â”‚ æ¥æ”¶æ¥è‡ª MarketAgent çš„åˆ†ææ•°æ®      â”‚
â”‚ ğŸ”§ run_backtest ...                 â”‚
```

**å®ç°**: `handoff` äº‹ä»¶è§¦å‘æ—¶æ¸²æŸ“å¸¦ç®­å¤´çš„ handoff æ¶ˆæ¯ï¼Œå±•ç¤º `from_agent â†’ to_agent` ä»¥åŠ `shared_data_summary`ã€‚

### 4.3 Agent åµŒå¥—è°ƒç”¨

**åœºæ™¯**: ChatAgent é€šè¿‡ `execute_workflow` å·¥å…·å‡½æ•°å†…éƒ¨åˆ›å»ºå¹¶æ‰§è¡Œ WorkflowAgentã€‚

**å±•ç¤ºæ–¹å¼ â€” ç¼©è¿›åµŒå¥—ï¼ˆçˆ¶å­å…³ç³»ï¼‰**:
```
â”‚ ğŸ’¬ ChatAgent                        â”‚
â”‚ ğŸ”§ execute_workflow                 â”‚
â”‚ args: {workflow: "å•è‚¡æ·±åº¦åˆ†æ"}      â”‚
â”‚                                     â”‚
â”‚   â”Œâ”€â”€ ğŸ“ WorkflowAgent (å­çº§)  â”€â”€â”  â”‚
â”‚   â”‚ å¼€å§‹æ‰§è¡Œå·¥ä½œæµ...               â”‚  â”‚
â”‚   â”‚ ğŸ”§ analyze_stock              â”‚  â”‚
â”‚   â”‚ args: {code: "600519"}        â”‚  â”‚
â”‚   â”‚ result: {score: 85}           â”‚  â”‚
â”‚   â”‚ âœ… å®Œæˆ (2.3s)                â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚ ğŸ’¬ ChatAgent                        â”‚
â”‚ âœ… å·¥ä½œæµæ‰§è¡Œå®Œæˆ                    â”‚
```

**å®ç°**: `agent_start` äº‹ä»¶ä¸­ `parent_agent` éç©ºæ—¶ï¼Œæ¶ˆæ¯æ¸²æŸ“åœ¨çˆ¶ Agent åŒºå—å†…éƒ¨ï¼Œä½¿ç”¨ç¼©è¿›å’Œå·¦è¾¹æ¡†æ ‡è¯†å±‚çº§ã€‚

### 4.4 Agent æ•°æ®å…±äº«ï¼ˆRedis ç¼“å­˜ä¼ é€’ï¼‰

**åœºæ™¯**: `AgentSharedCache.share_data_between_agents()` é€šè¿‡ Redis ä¼ é€’æ•°æ®ï¼Œå¦‚ MarketAgent çš„è¡Œæƒ…æ•°æ®ä¾› ReportAgent å¤ç”¨ã€‚

**å±•ç¤ºæ–¹å¼ â€” ç³»ç»Ÿé€šçŸ¥æ¶ˆæ¯**:
```
â”‚ âš™ï¸ æ•°æ®å…±äº«                         â”‚
â”‚ MarketAgent â†’ ReportAgent           â”‚
â”‚ ä¼ é€’: stock_info (600519.SH)        â”‚
â”‚       daily_data (250 æ¡è®°å½•)        â”‚
```

**å®ç°**: `data_sharing` äº‹ä»¶æ¸²æŸ“ä¸ºå±…ä¸­çš„ç³»ç»Ÿé€šçŸ¥æ ·å¼ï¼Œæ·¡è‰²èƒŒæ™¯ï¼Œå±•ç¤ºæ•°æ®é”®åå’Œæ‘˜è¦ã€‚

### 3.3 DebugTimeline.vue

ä¾§æ é¡¶éƒ¨çš„æ‰§è¡Œæ¦‚è§ˆï¼š
- æ¨ªå‘æ—¶é—´æ¡ï¼Œæ ‡æ³¨å„ Agent çš„æ‰§è¡ŒåŒºé—´
- å¹¶è¡Œ Agent ç”¨å¤šè¡Œæ˜¾ç¤º
- ç‚¹å‡»æ—¶é—´çº¿èŠ‚ç‚¹è·³è½¬åˆ°å¯¹åº”è°ƒè¯•æ¶ˆæ¯

## 5. äº¤äº’è®¾è®¡

### 5.1 å®æ—¶æ¨¡å¼ï¼ˆæµå¼ä¸­ï¼‰

1. ç”¨æˆ·å‘é€æ¶ˆæ¯ â†’ ä¾§æ è‡ªåŠ¨å±•å¼€ï¼ˆå¦‚æœä¹‹å‰æ‰“å¼€è¿‡ï¼‰
2. debug äº‹ä»¶å®æ—¶è¿½åŠ åˆ°æ¶ˆæ¯æµåº•éƒ¨ï¼Œè‡ªåŠ¨æ»šåŠ¨
3. æ­£åœ¨æ‰§è¡Œçš„ Agent/Tool æœ‰åŠ¨ç”»æ•ˆæœï¼ˆè„‰å†²/æ—‹è½¬ï¼‰
4. å®Œæˆååœ¨æ—¶é—´çº¿ä¸Šæ ‡è®°

### 5.2 å›çœ‹æ¨¡å¼ï¼ˆå†å²æ¶ˆæ¯ï¼‰

1. ç‚¹å‡»å†å²æ¶ˆæ¯çš„"ğŸ” è°ƒè¯•"æŒ‰é’®
2. ä» metadata.debug_events æ¢å¤è°ƒè¯•ä¿¡æ¯
3. ä¾§æ å±•ç¤ºè¯¥æ¡æ¶ˆæ¯çš„å®Œæ•´æ¨ç†é“¾

### 5.3 å¸ƒå±€å“åº”å¼

- **â‰¥1400px**: ä¸‰æ å¸ƒå±€ï¼ˆä¼šè¯åˆ—è¡¨ + å¯¹è¯ + è°ƒè¯•æ ï¼‰
- **1024-1400px**: è°ƒè¯•æ è¦†ç›–åœ¨å¯¹è¯åŒºä¸Šæ–¹ï¼ˆoverlay æ¨¡å¼ï¼‰
- **<1024px**: è°ƒè¯•æ ä½œä¸ºåº•éƒ¨æŠ½å±‰ï¼ˆdrawer æ¨¡å¼ï¼‰

## 6. æŠ€æœ¯å†³ç­–

| å†³ç­–ç‚¹ | é€‰é¡¹ | é€‰æ‹© | ç†ç”± |
|--------|------|------|------|
| äº‹ä»¶ä¼ è¾“ | æ–°å¢ debug ç±»å‹ vs å¤ç”¨ thinking | æ–°å¢ debug ç±»å‹ | èŒè´£åˆ†ç¦»ï¼Œä¸å½±å“ç°æœ‰ thinking UI |
| æ•°æ®å­˜å‚¨ | ç‹¬ç«‹è¡¨ vs metadata å­—æ®µ | metadata å­—æ®µ | é¿å… schema å˜æ›´ï¼Œè°ƒè¯•æ•°æ®ä¸æ¶ˆæ¯å¼ºå…³è” |
| ä¾§æ çŠ¶æ€ | å…¨å±€æŒä¹… vs ä¼šè¯çº§ | ä¼šè¯çº§ (sessionStorage) | è°ƒè¯•æ˜¯ä¸´æ—¶éœ€æ±‚ï¼Œä¸éœ€è¦è·¨ä¼šè¯æŒä¹… |
| æ¸²æŸ“æ–¹å¼ | è™šæ‹Ÿæ»šåŠ¨ vs å…¨é‡æ¸²æŸ“ | è™šæ‹Ÿæ»šåŠ¨ | å•æ¬¡å¯¹è¯å¯èƒ½äº§ç”Ÿ 50+ æ¡è°ƒè¯•æ¶ˆæ¯ |
| å¹¶è¡Œå±•ç¤º | çº¯æ—¶é—´çº¿ vs æ³³é“ | æ³³é“ (swim lanes) | å¹¶è¡Œ Agent çš„æ¶ˆæ¯äº¤é”™ä¼šå¯¼è‡´æ··ä¹±ï¼Œæ³³é“åˆ†éš”æœ€æ¸…æ™° |
| åµŒå¥—å±•ç¤º | å¹³é“º+æ ‡ç­¾ vs ç¼©è¿›åµŒå¥— | ç¼©è¿›åµŒå¥— | çˆ¶å­å…³ç³»ç”¨ç¼©è¿›æœ€ç›´è§‚ï¼Œä¸”ä¸å å¤ªå¤šæ°´å¹³ç©ºé—´ |
| Handoff å±•ç¤º | æ™®é€šæ¶ˆæ¯ vs è¿æ¥çº¿ | å¸¦ç®­å¤´çš„è¿æ¥æ¶ˆæ¯ | Agent ç§»äº¤æ˜¯å…³é”®å†³ç­–ç‚¹ï¼Œéœ€è¦è§†è§‰çªå‡º |
| Arena é›†æˆ | æœ¬æœŸè¦†ç›– vs ç‹¬ç«‹æ–¹æ¡ˆ | ç‹¬ç«‹æ–¹æ¡ˆ (Out of scope) | Arena æœ‰è‡ªå·±çš„ ThinkingStream å¯è§†åŒ–ä½“ç³»ï¼Œä¸æ··å…¥ Chat è°ƒè¯•æ  |
