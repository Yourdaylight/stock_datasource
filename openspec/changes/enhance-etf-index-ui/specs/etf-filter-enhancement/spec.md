# Capability: ETF 筛选条件增强

## ADDED Requirements

### Requirement: 日期切换功能

系统 MUST 支持按交易日期切换查看 ETF 列表数据。

**验收标准**：
- 筛选面板顶部显示日期选择器
- 默认选中最新交易日期
- 选择历史日期后自动刷新列表
- 日期选项来自 API 返回的可用交易日期列表

#### Scenario: 查看历史日期数据

**Given** 用户在 ETF 筛选页面
**When** 用户在日期选择器选择「2026-01-20」
**Then** ETF 列表显示 2026-01-20 当日的行情数据
**And** 所有 ETF 的交易数据（开盘、收盘、涨跌幅等）均为该日数据

### Requirement: 无数据提示弹窗

系统 MUST 在用户切换到无数据日期时提供友好提示和引导。

**验收标准**：
- 切换日期后若无数据，弹出提示弹窗
- 弹窗显示提示文案：「当前日期 {date} 暂无数据，是否立即更新？」
- 弹窗提供「前往数据管理」和「取消」按钮
- 弹窗包含 Tip：「您可以在『数据管理』中执行对应的插件来更新数据」

#### Scenario: 切换到无数据日期

**Given** 用户在 ETF 筛选页面
**When** 用户选择一个尚未同步数据的日期
**Then** 系统弹出数据提示弹窗
**And** 弹窗显示所选日期
**And** 用户点击「前往数据管理」后跳转到数据管理页面

### Requirement: 管理人筛选

系统 MUST 支持按基金管理人筛选 ETF 列表。

**验收标准**：
- 筛选面板显示「管理人」下拉选择框
- 选项来自 API 返回的管理人列表
- 每个选项显示管理人名称和对应 ETF 数量
- 选择后自动刷新列表

#### Scenario: 按管理人筛选 ETF

**Given** 用户在 ETF 筛选页面
**When** 用户在「管理人」下拉框选择「华夏基金」
**Then** ETF 列表仅显示华夏基金管理的 ETF
**And** 列表数量统计显示筛选后的 ETF 数量

### Requirement: 跟踪指数筛选

系统 MUST 支持按跟踪指数筛选 ETF 列表。

**验收标准**：
- 筛选面板显示「跟踪指数」下拉选择框
- 选项来自 API 返回的跟踪指数列表
- 选择后自动刷新列表

#### Scenario: 按跟踪指数筛选 ETF

**Given** 用户在 ETF 筛选页面
**When** 用户在「跟踪指数」下拉框选择「沪深300」
**Then** ETF 列表仅显示跟踪沪深300的 ETF
**And** 列表中显示的 ETF 的「跟踪指数」列均为沪深300相关指数

### Requirement: 管理费率区间筛选

系统 MUST 支持按管理费率区间筛选 ETF 列表。

**验收标准**：
- 筛选面板显示「管理费率」下拉选择框
- 提供固定区间选项：全部、0-0.2%、0.2%-0.5%、0.5%以上
- 选择后自动刷新列表

#### Scenario: 按低费率筛选 ETF

**Given** 用户在 ETF 筛选页面
**When** 用户在「管理费率」下拉框选择「0-0.2%」
**Then** ETF 列表仅显示管理费率在 0-0.2% 之间的 ETF
**And** 列表中显示的 ETF 的「管理费率」列均不超过 0.2%

### Requirement: 成交额区间筛选

系统 MUST 支持按日均成交额筛选 ETF 列表（流动性筛选）。

**验收标准**：
- 筛选面板显示「成交额」下拉选择框
- 提供固定区间选项：全部、1000万以上、5000万以上、1亿以上
- 选择后自动刷新列表

#### Scenario: 筛选高流动性 ETF

**Given** 用户在 ETF 筛选页面
**When** 用户在「成交额」下拉框选择「1亿以上」
**Then** ETF 列表仅显示日均成交额超过 1 亿的 ETF
**And** 帮助用户筛选出流动性较好的 ETF

### Requirement: 涨跌幅区间筛选

系统 MUST 支持按今日涨跌幅区间筛选 ETF 列表。

**验收标准**：
- 筛选面板显示「涨跌幅」下拉选择框
- 提供固定区间选项：全部、上涨、下跌、涨幅>2%、涨幅>5%、跌幅>2%、跌幅>5%
- 选择后自动刷新列表

#### Scenario: 筛选上涨 ETF

**Given** 用户在 ETF 筛选页面
**When** 用户在「涨跌幅」下拉框选择「上涨」
**Then** ETF 列表仅显示今日涨跌幅为正的 ETF
**And** 列表中显示的 ETF 的「涨跌幅」列均为红色（上涨）
