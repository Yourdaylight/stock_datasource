# ============================================
# Docker Deployment Environment Configuration
# Copy to .env and customize as needed
# ============================================

# ============================================
# Infrastructure - ClickHouse (宿主机 langfuse-clickhouse-1)
# backend 加入 langfuse_default 网络后可直接通过容器名访问
# ============================================
CLICKHOUSE_HOST=langfuse-clickhouse-1
CLICKHOUSE_PORT=9000
CLICKHOUSE_HTTP_PORT=8123
CLICKHOUSE_USER=clickhouse
CLICKHOUSE_PASSWORD=clickhouse
CLICKHOUSE_DATABASE=stock_datasource

# ============================================
# Infrastructure - Redis (via docker network)
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_EXPOSE_PORT=16379
REDIS_PASSWORD=Stock_datasource666
REDIS_DB=1

# ============================================
# Infrastructure - Postgres (for Langfuse)
# ============================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=postgres
POSTGRES_PORT=15432

# ============================================
# Application Ports
# ============================================
APP_PORT=18080
LANGFUSE_PORT=3000

# ============================================
# Frontend Configuration
# ============================================
# Leave empty - frontend uses relative /api path via nginx proxy
VITE_API_BASE_URL=
FRONTEND_TARGET=production

# ============================================
# Langfuse Configuration (宿主机)
# ============================================
LANGFUSE_HOST=http://host.docker.internal:3000
LANGFUSE_PUBLIC_KEY=pk-lf-7c4039ed-f34e-465c-a885-5166bb358d00
LANGFUSE_SECRET_KEY=sk-lf-29822914-8a94-4a9c-92ab-2cfe7c1d290c

# ============================================
# API Keys (required - replace with your keys)
# ============================================
TUSHARE_TOKEN=73751827e55aeb8222ec5fb852527d2b47698afbe2d4f603570f102d
OPENAI_API_KEY=sk-d2d0dc36-f065-46ed-a897-0ddcbd0046eb
OPENAI_BASE_URL=https://api.haihub.cn/v1/
OPENAI_MODEL=Kimi-K2-Thinking

# ============================================
# Cache TTL Settings (seconds)
# ============================================
CACHE_TTL_QUOTE=60
CACHE_TTL_DAILY=86400
CACHE_TTL_BASIC=3600
CACHE_TTL_OVERVIEW=300

# ============================================
# Auth / Registration
# ============================================
# Default: open registration (no email whitelist)
AUTH_EMAIL_WHITELIST_ENABLED=false
# When enabled, backend will import this file on startup.
# Recommended for docker: put file under ./data and use data/email.txt (data dir is mounted into container).
AUTH_EMAIL_WHITELIST_FILE=data/email.txt

# ============================================
# Misc
# ============================================
TELEMETRY_ENABLED=false
LANGFUSE_ENABLE_EXPERIMENTAL_FEATURES=false
